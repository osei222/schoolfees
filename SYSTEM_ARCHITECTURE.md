# ğŸ”— Frontend-Backend Connection Map

## System Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USER BROWSER                                 â”‚
â”‚                     http://localhost:5173                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â”‚ HTTP/REST API
                                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    REACT FRONTEND (Vite)                             â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚  â”‚   src/pages/    â”‚      â”‚  src/contexts/   â”‚                     â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                     â”‚
â”‚  â”‚ â€¢ Login.jsx     â”‚â—„â”€â”€â”€â”€â–ºâ”‚ â€¢ AuthContext    â”‚                     â”‚
â”‚  â”‚ â€¢ Dashboard.jsx â”‚      â”‚   (JWT Auth)     â”‚                     â”‚
â”‚  â”‚ â€¢ Students.jsx  â”‚â—„â”€â”€â”€â”€â–ºâ”‚ â€¢ DataContext    â”‚                     â”‚
â”‚  â”‚ â€¢ Payments.jsx  â”‚      â”‚   (Business Data)â”‚                     â”‚
â”‚  â”‚ â€¢ Settings.jsx  â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚  â”‚ â€¢ Wallet.jsx    â”‚               â”‚                               â”‚
â”‚  â”‚ â€¢ Communication â”‚               â”‚                               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚                               â”‚
â”‚                                    â”‚                               â”‚
â”‚                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚                        â”‚    src/utils/api.js    â”‚                 â”‚
â”‚                        â”‚  â€¢ authAPI             â”‚                 â”‚
â”‚                        â”‚  â€¢ studentsAPI         â”‚                 â”‚
â”‚                        â”‚  â€¢ paymentsAPI         â”‚                 â”‚
â”‚                        â”‚  â€¢ feesAPI             â”‚                 â”‚
â”‚                        â”‚  â€¢ walletAPI           â”‚                 â”‚
â”‚                        â”‚  â€¢ smsAPI              â”‚                 â”‚
â”‚                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â”‚ fetch() with JWT
                                     â”‚ Authorization: Bearer token
                                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  FASTAPI BACKEND                                   â”‚
â”‚                http://localhost:8000                               â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    app/main.py                               â”‚ â”‚
â”‚  â”‚  â€¢ CORS Configuration (allow localhost:5173)                â”‚ â”‚
â”‚  â”‚  â€¢ JWT Middleware                                           â”‚ â”‚
â”‚  â”‚  â€¢ Register All Routers                                     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                       â”‚                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                 app/routers/                                 â”‚ â”‚
â”‚  â”‚                                                              â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚ â”‚
â”‚  â”‚  â”‚   auth.py    â”‚  â”‚ students.py  â”‚  â”‚ payments.py  â”‚     â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚ â”‚
â”‚  â”‚  â”‚ POST /login  â”‚  â”‚ GET /studentsâ”‚  â”‚ POST /paymentsâ”‚    â”‚ â”‚
â”‚  â”‚  â”‚ POST /registerâ”‚ â”‚ POST /studentsâ”‚ â”‚ GET /receiptsâ”‚     â”‚ â”‚
â”‚  â”‚  â”‚ GET /me      â”‚  â”‚ PUT /studentsâ”‚  â”‚ POST /send-smsâ”‚    â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚ â”‚
â”‚  â”‚                            â”‚                  â”‚             â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”     â”‚ â”‚
â”‚  â”‚  â”‚   fees.py    â”‚  â”‚  wallet.py   â”‚  â”‚   sms.py     â”‚     â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚ â”‚
â”‚  â”‚  â”‚ GET /fees    â”‚  â”‚ GET /balance â”‚  â”‚ POST /send-bulkâ”‚   â”‚ â”‚
â”‚  â”‚  â”‚ POST /fees   â”‚  â”‚ POST /topup  â”‚  â”‚ GET /logs    â”‚     â”‚ â”‚
â”‚  â”‚  â”‚ GET /summary â”‚  â”‚ POST /purchaseâ”‚ â”‚              â”‚     â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚ â”‚
â”‚  â”‚                                              â”‚             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                  â”‚               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                app/services/                                â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚ â”‚
â”‚  â”‚  â”‚ auth_service.py â”‚      â”‚  sms_service.py  â”‚            â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ JWT Creation  â”‚      â”‚ â€¢ Arkesel API    â”‚            â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ Password Hash â”‚      â”‚ â€¢ SMS Sending    â”‚            â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ Token Verify  â”‚      â”‚ â€¢ Balance Check  â”‚            â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                  â”‚               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                  app/models.py                              â”‚ â”‚
â”‚  â”‚  â€¢ User (School)                                           â”‚ â”‚
â”‚  â”‚  â€¢ Student                                                 â”‚ â”‚
â”‚  â”‚  â€¢ FeeStructure                                            â”‚ â”‚
â”‚  â”‚  â€¢ StudentFeeRecord                                        â”‚ â”‚
â”‚  â”‚  â€¢ Payment                                                 â”‚ â”‚
â”‚  â”‚  â€¢ WalletTransaction                                       â”‚ â”‚
â”‚  â”‚  â€¢ SMSLog                                                  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â”‚ SQLAlchemy ORM
                                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         PostgreSQL DATABASE                         â”‚
â”‚                     postgresql://localhost:5432                     â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  users   â”‚  â”‚students â”‚  â”‚fee_structureâ”‚  â”‚student_fee_recordâ”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚ payments â”‚  â”‚wallet_transactionâ”‚  â”‚sms_logsâ”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â”‚ External API
                                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ARKESEL SMS API                             â”‚
â”‚                   https://sms.arkesel.com                           â”‚
â”‚                                                                      â”‚
â”‚  â€¢ Send SMS to parent phone numbers                                â”‚
â”‚  â€¢ Receipt notifications                                           â”‚
â”‚  â€¢ Bulk SMS campaigns                                              â”‚
â”‚  â€¢ API Key: TlZMTndiYXZzaXJtWWxkTFJOdVI                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Request Flow Examples

### 1. User Login Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User    â”‚                  â”‚ Frontend â”‚                  â”‚ Backend  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚                             â”‚                             â”‚
     â”‚  Enter credentials          â”‚                             â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                             â”‚
     â”‚                             â”‚  POST /auth/login          â”‚
     â”‚                             â”‚  { username, password }     â”‚
     â”‚                             â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
     â”‚                             â”‚                             â”‚
     â”‚                             â”‚                      Verify â”‚
     â”‚                             â”‚                   password  â”‚
     â”‚                             â”‚                     Create  â”‚
     â”‚                             â”‚                   JWT token â”‚
     â”‚                             â”‚                             â”‚
     â”‚                             â”‚   { access_token, user }    â”‚
     â”‚                             â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚                             â”‚                             â”‚
     â”‚  Store token in            â”‚                             â”‚
     â”‚  localStorage              â”‚                             â”‚
     â”‚                             â”‚                             â”‚
     â”‚  Navigate to Dashboard      â”‚                             â”‚
     â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                             â”‚
     â”‚                             â”‚                             â”‚
```

### 2. Create Student Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User    â”‚                  â”‚ Frontend â”‚                  â”‚ Backend  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚                             â”‚                             â”‚
     â”‚  Fill student form          â”‚                             â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                             â”‚
     â”‚                             â”‚                             â”‚
     â”‚                             â”‚  POST /students/           â”‚
     â”‚                             â”‚  Authorization: Bearer XXX  â”‚
     â”‚                             â”‚  { student_data }           â”‚
     â”‚                             â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
     â”‚                             â”‚                             â”‚
     â”‚                             â”‚                   Verify JWTâ”‚
     â”‚                             â”‚              Create student â”‚
     â”‚                             â”‚        Get fee structures   â”‚
     â”‚                             â”‚  Create fee records (auto)  â”‚
     â”‚                             â”‚                             â”‚
     â”‚                             â”‚   { student, fee_records }  â”‚
     â”‚                             â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚                             â”‚                             â”‚
     â”‚  Update UI                 â”‚                             â”‚
     â”‚  Show success              â”‚                             â”‚
     â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                             â”‚
     â”‚                             â”‚                             â”‚
```

### 3. Payment with SMS Receipt Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User â”‚  â”‚Frontend â”‚  â”‚Backend â”‚  â”‚PostgreSQLâ”‚  â”‚ Arkesel  â”‚
â””â”€â”€â”€â”¬â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
    â”‚          â”‚            â”‚            â”‚             â”‚
    â”‚ Pay GHS 500          â”‚            â”‚             â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚            â”‚            â”‚             â”‚
    â”‚          â”‚ POST       â”‚            â”‚             â”‚
    â”‚          â”‚/payments/  â”‚            â”‚             â”‚
    â”‚          â”‚?send_sms=  â”‚            â”‚             â”‚
    â”‚          â”‚true        â”‚            â”‚             â”‚
    â”‚          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚            â”‚             â”‚
    â”‚          â”‚            â”‚ Verify JWT â”‚             â”‚
    â”‚          â”‚            â”‚            â”‚             â”‚
    â”‚          â”‚            â”‚ Create     â”‚             â”‚
    â”‚          â”‚            â”‚ payment    â”‚             â”‚
    â”‚          â”‚            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚             â”‚
    â”‚          â”‚            â”‚            â”‚             â”‚
    â”‚          â”‚            â”‚ Update     â”‚             â”‚
    â”‚          â”‚            â”‚ balances   â”‚             â”‚
    â”‚          â”‚            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚             â”‚
    â”‚          â”‚            â”‚            â”‚             â”‚
    â”‚          â”‚            â”‚ Get studentâ”‚             â”‚
    â”‚          â”‚            â”‚ fee recordsâ”‚             â”‚
    â”‚          â”‚            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚             â”‚
    â”‚          â”‚            â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤             â”‚
    â”‚          â”‚            â”‚            â”‚             â”‚
    â”‚          â”‚            â”‚ Generate   â”‚             â”‚
    â”‚          â”‚            â”‚ receipt    â”‚             â”‚
    â”‚          â”‚            â”‚            â”‚             â”‚
    â”‚          â”‚            â”‚ Send SMS   â”‚             â”‚
    â”‚          â”‚            â”‚ (Arkesel)  â”‚             â”‚
    â”‚          â”‚            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
    â”‚          â”‚            â”‚            â”‚        Send â”‚
    â”‚          â”‚            â”‚            â”‚         to  â”‚
    â”‚          â”‚            â”‚            â”‚      parent â”‚
    â”‚          â”‚            â”‚            â”‚             â”‚
    â”‚          â”‚            â”‚ Log SMS    â”‚             â”‚
    â”‚          â”‚            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚             â”‚
    â”‚          â”‚            â”‚            â”‚             â”‚
    â”‚          â”‚            â”‚ Update     â”‚             â”‚
    â”‚          â”‚            â”‚ SMS balanceâ”‚             â”‚
    â”‚          â”‚            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚             â”‚
    â”‚          â”‚            â”‚            â”‚             â”‚
    â”‚          â”‚  Success   â”‚            â”‚             â”‚
    â”‚          â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚             â”‚
    â”‚          â”‚            â”‚            â”‚             â”‚
    â”‚ Show     â”‚            â”‚            â”‚             â”‚
    â”‚ receipt  â”‚            â”‚            â”‚             â”‚
    â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚            â”‚             â”‚
    â”‚          â”‚            â”‚            â”‚             â”‚
```

---

## ğŸ” Authentication Flow

### JWT Token Management

1. **Login/Register**
   ```javascript
   // Frontend: src/utils/api.js
   const response = await fetch('/auth/login', {
     method: 'POST',
     body: formData
   });
   
   // Response contains:
   {
     access_token: "eyJhbGc...",
     token_type: "bearer",
     username: "myschool",
     ...
   }
   
   // Stored in localStorage
   localStorage.setItem('user', JSON.stringify(userData));
   ```

2. **Authenticated Requests**
   ```javascript
   // Frontend: src/utils/api.js
   const token = getToken(); // from localStorage
   
   fetch('/students/', {
     headers: {
       'Authorization': `Bearer ${token}`,
       'Content-Type': 'application/json'
     }
   });
   ```

3. **Backend Verification**
   ```python
   # Backend: app/routers/students.py
   @router.get("/")
   async def get_students(
       current_user: User = Depends(get_current_user)
   ):
       # current_user is automatically extracted from JWT
       # Only returns data for this user (multi-tenant)
       students = db.query(Student).filter(
           Student.user_id == current_user.id
       ).all()
   ```

---

## ğŸ“Š Data Isolation (Multi-Tenant)

Each school's data is completely isolated:

```
School A (user_id=1)
â”œâ”€â”€ Students: [Student1, Student2]
â”œâ”€â”€ Payments: [Payment1, Payment2]
â”œâ”€â”€ Fee Structure: [TuitionFee, ExamFee]
â””â”€â”€ Wallet: Balance GHS 500

School B (user_id=2)  
â”œâ”€â”€ Students: [Student3, Student4]
â”œâ”€â”€ Payments: [Payment3]
â”œâ”€â”€ Fee Structure: [TuitionFee, LibraryFee]
â””â”€â”€ Wallet: Balance GHS 200

âŒ School A cannot see or access School B's data
âœ… JWT token contains user_id
âœ… All queries filter by user_id automatically
```

---

## ğŸš¦ API Response Handling

### Success Response
```javascript
// Frontend receives:
{
  id: 1,
  name: "John Doe",
  class_name: "Grade 10A",
  total_fees: 1050,
  total_paid: 500,
  balance: 550,
  payment_status: "Partial"
}

// Context updates state
setStudents([...students, newStudent]);
```

### Error Response
```javascript
// Frontend receives:
{
  detail: "Insufficient SMS balance"
}

// Context handles error
setError(err.message);
return { success: false, error: err.message };
```

---

## ğŸ“± SMS Receipt Format

When a payment is made with `send_sms=true`:

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
EXAMPLE SCHOOL
123 School Street
Tel: 0244567890
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Receipt #: RCP20241102120000
Date: 02/11/2024 12:00 PM

Student: John Doe
Class: Grade 10A
Parent: Jane Doe (0241234567)

PAYMENT DETAILS
---------------
Amount Paid: GHS 500.00
Payment Method: Cash
Fee Type: Tuition Fee
Term: Term 1 2024/2025

FINANCIAL SUMMARY
-----------------
Total Fees: GHS 1,050.00
Total Paid: GHS 500.00
Balance: GHS 550.00

UNPAID FEES
-----------
â€¢ Exam Fees: GHS 200.00
â€¢ Library Fees: GHS 100.00

âš ï¸ PARTIALLY PAID
Balance Remaining: GHS 550.00

Thank you for your payment.
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## âœ… Integration Checklist

### Backend Ready
- [x] All 6 routers implemented
- [x] JWT authentication working
- [x] Multi-tenant data isolation
- [x] PostgreSQL models created
- [x] SMS integration with Arkesel
- [x] Professional receipts with breakdown
- [x] CORS configured for frontend

### Frontend Connected
- [x] API utility created (src/utils/api.js)
- [x] AuthContext using backend auth
- [x] DataContext using backend data
- [x] Login page updated
- [x] Dashboard loading from backend
- [ ] Students page integration (ready)
- [ ] Payments page integration (ready)
- [ ] Settings page integration (ready)
- [ ] Wallet page integration (ready)
- [ ] Communication page integration (ready)

### Testing
- [ ] Backend running on port 8000
- [ ] Frontend running on port 5173
- [ ] Can register school
- [ ] Can login from frontend
- [ ] Dashboard shows real data
- [ ] Can create students
- [ ] Can make payments
- [ ] SMS receipts send successfully

---

**ğŸ‰ System is ready for testing! Run `.\quick-start.ps1` to begin! ğŸ‰**
